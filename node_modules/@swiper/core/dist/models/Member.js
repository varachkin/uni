"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Member = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _isNil2 = _interopRequireDefault(require("lodash/isNil"));

var _get2 = _interopRequireDefault(require("lodash/get"));

var _has2 = _interopRequireDefault(require("lodash/has"));

var _isString2 = _interopRequireDefault(require("lodash/isString"));

var _Person = require("./Person");

const settingsDefaults = {
  toggleOnSwipe: true
};

class Member extends _Person.Person {
  constructor(options = {}) {
    if ((0, _isString2.default)(options)) options = {
      id: options
    };
    super(options);
  }

  setting(key, defaultValue) {
    if ((0, _has2.default)(this, ['settings', key])) {
      const val = (0, _get2.default)(this, ['settings', key]);
      if (!(0, _isNil2.default)(val)) return val;
    }

    if (!(0, _isNil2.default)(defaultValue)) return defaultValue;
    return settingsDefaults[key];
  }

}

exports.Member = Member;
(0, _defineProperty2.default)(Member, "validators", [x => {
  if (!x.id) return 'must have an id';
  if (!x.membershipId) return 'must have a membershipId';

  if (!x.id.startsWith(x.membershipId + '.')) {
    return 'id must be prefixed with membershipId';
  }
}]);
//# sourceMappingURL=Member.js.map